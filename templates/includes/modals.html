<!-- æ·»åŠ /ç¼–è¾‘è´¦å·æ¨¡æ€æ¡† -->
<div id="accountModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">æ·»åŠ è´¦å·</h3>
            <span class="close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <form id="accountForm">
                <input type="hidden" id="accountId">

                <div class="form-group">
                    <label for="accountName">è´¦å·åç§° *</label>
                    <input type="text" id="accountName" required>
                </div>

                <div class="form-group">
                    <label for="curlCommand">Curl å‘½ä»¤ *</label>
                    <textarea id="curlCommand" rows="6" required placeholder="ç²˜è´´å®Œæ•´çš„ curl å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š&#10;curl 'https://api.example.com/checkin' \&#10;  -H 'Authorization: Bearer token123' \&#10;  -H 'Content-Type: application/json' \&#10;  --data-raw '{&quot;user_id&quot;: 123}'"></textarea>
                </div>

                <div class="form-group">
                    <label for="cronExpr">Cron è¡¨è¾¾å¼ *</label>
                    <input type="text" id="cronExpr" value="0 8 * * *" required>
                    <small style="display: block; margin-top: 5px;">
                        <strong>æ”¯æŒä¸¤ç§æ ¼å¼ï¼š</strong><br>
                        <strong>1. æ ‡å‡† Cronï¼š</strong>åˆ† æ—¶ æ—¥ æœˆ å‘¨<br>
                        &nbsp;&nbsp;&nbsp;â€¢ <code>0 8 * * *</code> â†’ æ¯å¤© 8:00 æ‰§è¡Œ<br>
                        &nbsp;&nbsp;&nbsp;â€¢ <code>30 14 * * 1-5</code> â†’ æ¯å‘¨ä¸€åˆ°å‘¨äº” 14:30 æ‰§è¡Œ<br>
                        <strong>2. éšæœºæ—¶é—´çª—å£ï¼š</strong>R(å¼€å§‹æ—¶é—´-ç»“æŸæ—¶é—´) æ—¥ æœˆ å‘¨<br>
                        &nbsp;&nbsp;&nbsp;â€¢ <code>R(09:00-09:30) * * *</code> â†’ æ¯å¤© 9:00-9:30 ä¹‹é—´éšæœºæ‰§è¡Œ<br>
                        &nbsp;&nbsp;&nbsp;â€¢ <code>R(08:00-08:15) * * 1-5</code> â†’ æ¯å‘¨ä¸€åˆ°å‘¨äº” 8:00-8:15 éšæœºæ‰§è¡Œ<br>
                        &nbsp;&nbsp;&nbsp;â€¢ <code>R(20:00-22:00) 1 * *</code> â†’ æ¯æœˆ1å· 20:00-22:00 éšæœºæ‰§è¡Œ
                    </small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="retryCount">é‡è¯•æ¬¡æ•°</label>
                        <input type="number" id="retryCount" value="3" min="0" max="10">
                    </div>

                    <div class="form-group">
                        <label for="retryInterval">é‡è¯•é—´éš”(ç§’)</label>
                        <input type="number" id="retryInterval" value="60" min="1">
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="enabled" checked>
                        å¯ç”¨å®šæ—¶ä»»åŠ¡
                    </label>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="closeModal()" class="btn btn-secondary">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- å“åº”è¯¦æƒ…æ¨¡æ€æ¡† -->
<div id="responseModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>å“åº”è¯¦æƒ…</h3>
            <span class="close" onclick="closeResponseModal()">&times;</span>
        </div>
        <div class="modal-body">
            <pre id="responseContent" style="white-space: pre-wrap; word-wrap: break-word; max-height: 500px; overflow-y: auto; background: #f5f5f5; padding: 15px; border-radius: 4px;"></pre>
        </div>
    </div>
</div>

<!-- ç³»ç»Ÿè®¾ç½®æ¨¡æ€æ¡† -->
<div id="systemSettingsModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h3>ç³»ç»Ÿè®¾ç½®</h3>
            <span class="close" onclick="closeSystemSettingsModal()">&times;</span>
        </div>
        <div class="modal-body">
            <!-- ä¿®æ”¹å¯†ç  -->
            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h4 style="margin-top: 0;">ä¿®æ”¹ç®¡ç†å‘˜å¯†ç </h4>

                <div class="form-group">
                    <label for="oldPassword">æ—§å¯†ç  *</label>
                    <input type="password" id="oldPassword" placeholder="è¯·è¾“å…¥æ—§å¯†ç ">
                </div>

                <div class="form-group">
                    <label for="newPassword">æ–°å¯†ç  *</label>
                    <input type="password" id="newPassword" placeholder="è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰">
                </div>

                <div class="form-group">
                    <label for="confirmPassword">ç¡®è®¤æ–°å¯†ç  *</label>
                    <input type="password" id="confirmPassword" placeholder="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ">
                </div>

                <button onclick="changePassword()" class="btn btn-primary">ä¿®æ”¹å¯†ç </button>
            </div>

            <!-- è‡ªåŠ¨æ¸…ç†é…ç½® -->
            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h4 style="margin-top: 0;">ç­¾åˆ°è®°å½•è‡ªåŠ¨æ¸…ç†</h4>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="autoCleanLogs">
                        å¯ç”¨è‡ªåŠ¨æ¸…ç†
                    </label>
                    <small>å¯ç”¨åï¼Œæ¯å¤©å‡Œæ™¨ 3:00 è‡ªåŠ¨æ¸…ç†è¶…å‡ºé™åˆ¶çš„æ—§è®°å½•</small>
                </div>

                <div class="form-group">
                    <label for="maxLogsCount">æœ€å¤§è®°å½•æ•°</label>
                    <input type="number" id="maxLogsCount" value="500" min="100" max="10000">
                    <small>ä¿ç•™æœ€æ–°çš„ N æ¡ç­¾åˆ°è®°å½•ï¼Œè¶…å‡ºéƒ¨åˆ†å°†è¢«è‡ªåŠ¨æ¸…ç†ï¼ˆæœ€å° 100 æ¡ï¼‰</small>
                </div>
            </div>

            <div class="form-actions">
                <button onclick="closeSystemSettingsModal()" class="btn btn-secondary">å–æ¶ˆ</button>
                <button onclick="saveSystemConfig()" class="btn btn-primary">ä¿å­˜é…ç½®</button>
            </div>
        </div>
    </div>
</div>

<!-- åº”ç”¨é€‰æ‹©æ¨¡æ€æ¡† -->
<div id="appSelectionModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h3>é€‰æ‹©åº”ç”¨</h3>
            <span class="close" onclick="closeAppSelectionModal()">&times;</span>
        </div>
        <div class="modal-body" style="padding: 30px;">
            <style>
                .app-card {
                    position: relative;
                    padding: 8px 6px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    overflow: hidden;
                    border: 1px solid transparent;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                }

                .app-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: inherit;
                    opacity: 1;
                    transition: opacity 0.3s ease;
                    z-index: 0;
                }

                .app-card:hover {
                    transform: translateY(-4px) scale(1.02);
                    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
                    border-color: rgba(255, 255, 255, 0.3);
                }

                .app-card:hover::before {
                    opacity: 0.9;
                }

                .app-card-content {
                    position: relative;
                    z-index: 1;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 4px;
                }

                .app-icon {
                    font-size: 18px;
                    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
                    transition: transform 0.3s ease;
                }

                .app-card:hover .app-icon {
                    transform: scale(1.1) rotate(5deg);
                }

                .app-name {
                    font-size: 11px;
                    font-weight: 600;
                    color: white;
                    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
                    letter-spacing: 0.2px;
                }

                .app-desc {
                    font-size: 9px;
                    color: rgba(255, 255, 255, 0.85);
                    text-align: center;
                    line-height: 1.2;
                }

                .app-card-leaflow {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                }

                .app-card-anyrouter {
                    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                }
            </style>

            <div style="display: grid; grid-template-columns: repeat(5, 90px); gap: 15px; justify-content: start;">
                <div class="app-card app-card-leaflow" onclick="showCustomAccountModal('Leaflow')">
                    <div class="app-card-content">
                        <div class="app-icon">ğŸƒ</div>
                        <div class="app-name">Leaflow</div>
                        <div class="app-desc">æµé‡ç®¡ç†</div>
                    </div>
                </div>

                <div class="app-card app-card-anyrouter" onclick="showCustomAccountModal('AnyRouter')">
                    <div class="app-card-content">
                        <div class="app-icon">ğŸŒ</div>
                        <div class="app-name">AnyRouter</div>
                        <div class="app-desc">è·¯ç”±æœåŠ¡</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- è‡ªå®šä¹‰è´¦å·æ¨¡æ€æ¡†ï¼ˆå ä½ç¬¦ï¼Œç­‰ä¼šå®ç°ï¼‰ -->
<div id="customAccountModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="customModalTitle">æ·»åŠ è‡ªå®šä¹‰è´¦å·</h3>
            <span class="close" onclick="closeCustomAccountModal()">&times;</span>
        </div>
        <div class="modal-body">
            <p>è‡ªå®šä¹‰è´¦å·è¡¨å•å†…å®¹ï¼ˆå¾…å®ç°ï¼‰</p>
            <p>å½“å‰é€‰æ‹©çš„åº”ç”¨ï¼š<span id="selectedAppType"></span></p>
        </div>
    </div>
</div>

<!-- è¯·æ±‚è¯¦æƒ…æ¨¡æ€æ¡† -->
<div id="requestPreviewModal" class="modal">
    <div class="modal-content" style="max-width: 800px; max-height: 90vh; display: flex; flex-direction: column;">
        <div class="modal-header">
            <h3>è¯·æ±‚è¯¦æƒ…ç›‘è§†å™¨</h3>
            <span class="close" onclick="closeRequestPreviewModal()">&times;</span>
        </div>
        <div class="modal-body" style="overflow-y: auto; flex: 1; padding: 20px;">
            <!-- è¯·æ±‚æ–¹å¼ -->
            <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <span style="font-weight: 600; color: #555; font-size: 13px; text-transform: uppercase;">Method</span>
                </div>
                <div style="background: #f6f8fa; border: 1px solid #d0d7de; border-radius: 6px; padding: 12px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace;">
                    <code id="previewMethod" style="font-size: 14px; color: #0969da; font-weight: 600;">-</code>
                </div>
            </div>

            <!-- è¯·æ±‚åœ°å€ -->
            <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <span style="font-weight: 600; color: #555; font-size: 13px; text-transform: uppercase;">URL</span>
                </div>
                <div style="background: #f6f8fa; border: 1px solid #d0d7de; border-radius: 6px; padding: 12px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; word-break: break-all;">
                    <code id="previewUrl" style="font-size: 13px; color: #1f883d;">-</code>
                </div>
            </div>

            <!-- è¯·æ±‚å¤´ -->
            <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <span style="font-weight: 600; color: #555; font-size: 13px; text-transform: uppercase;">Headers</span>
                </div>
                <div style="background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 14px; max-height: 250px; overflow-y: auto;">
                    <pre id="previewHeaders" style="margin: 0; font-size: 13px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; color: #c9d1d9; white-space: pre-wrap; word-wrap: break-word; line-height: 1.6;">-</pre>
                </div>
            </div>

            <!-- è¯·æ±‚ä½“ -->
            <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <span style="font-weight: 600; color: #555; font-size: 13px; text-transform: uppercase;">Body</span>
                </div>
                <div style="background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 14px; max-height: 250px; overflow-y: auto;">
                    <pre id="previewData" style="margin: 0; font-size: 13px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; color: #c9d1d9; white-space: pre-wrap; word-wrap: break-word; line-height: 1.6;">-</pre>
                </div>
            </div>

            <div style="text-align: right; margin-top: 24px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                <button onclick="closeRequestPreviewModal()" class="btn btn-secondary">å…³é—­</button>
            </div>
        </div>
    </div>
</div>
